categories: Note

tags:

- JS

date: 2016-12-31

toc: false

title: 自动化规范 JS 代码风格
---

要在多人合作的项目规模增加时保证可维护性，统一的代码风格是十分重要的。而通过配置 ESLint 在代码提交前统一检查并人工逐一修改的方式，容易引入较多的额外负担。

<!--more-->

主流 IDE 一般具备 Prettify 的功能，可以按约定的格式要求格式化代码。这种方式虽然易用，但定制 IDE 的风格细节（如是否在函数声明后加空格、`else` 是否换行）是相当繁琐的，且维护 IDE 的配置文件也比较麻烦。在只对代码有基本的排版风格需求的情况下，可以采用 [StandardJS](http://standardjs.com/rules.html) 作为风格规范，并用 [standard-formatter](https://atom.io/packages/standard-formatter) 自动格式化 JS 代码。

StandardJS 约定了一套不可定制，但可满足强迫症患者排版需求的完整代码风格规范。规范中的风格并不仅限于空格、缩进、分号一类的排版风格，还包括了对 `===` 和 `err` 错误处理等代码逻辑的若干基本要求。虽然对逻辑相关的部分，standard-formatter 不会去自动化地尝试重构，但它已能够做到将老代码自动转为 2 格缩进、充分空格留白且无分号的风格。并且，这个工具并不强制对当前文件做全量的修改，可以按需重排选中的部分，在一些内联脚本的场合这显得尤为灵活。

使用 standard-formatter 的方式也很简单，在 Atom 的包管理器中安装即可。安装并启用后，`ctrl-alt-v` 快捷键就可以自动格式化当前文件了。在 `.vue` 这类既包含 JS 又包含模板和样式的文件中，可以先通过 `shift` 点击选中需要格式化的代码段，再使用快捷键格式化相应部分的代码。
